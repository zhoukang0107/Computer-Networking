<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>第六章 链路层和局域网</title>
	</head>
	<body>
		链路层提供的服务:成帧、链路接入、可靠交付、差错检测和纠正。<br />
		链路层的主体部分是在网络适配器中实现，网络适配器有时也称为网络接收卡。位于网络适配器核心的是链路层控制器，该控制器通常是一个实现了许多链路层服务（成帧、链路接入、差错检测等）的专用芯片。<br />
		在发送端，控制器取得了由协议栈较高层次生成并存储在主机内存中的数据报，在链路层帧中封装该数据报（填写该帧的各个字段），然后遵循链路接入协议，然后将该帧传进通讯链路中。在接收端，控制器接受了整个帧，
		抽取出网络层数据报。如果链路层执行差错检测，则需要发送控制器在该帧的首部设置差错检测比特，由接受控制器执行差错检测。
		链路层是硬件和软件的结合体。此处是协议栈中软件和硬件交接的地方。
		<h2>差错检测和纠正技术</h2>
		<div>
			<h3>奇偶校验</h3>
			<div>
				
			</div>
			<h3>检验和方法</h3>
			<div>
				
			</div>
			<h3>循环冗余检测</h3>
			<div>
				
			</div>
		</div>
		<h2>多路访问链路和协议</h2>
		<div>
			点对点链路：由链路一端的单个发送方和链路另一端的单个接收方组成。点对点链路协议：点对点协议（PPP）、高级数据链路控制（HDLC）<br />
			广播链路：他能够让多个发送方和多个接收方都连接到相同的、单一的、共享的广播信道上。当任何一个节点传输一个帧时，信道广播该帧，每个节点都收到一个副本。如何协调多个发送和接受节点
			对一个共享的广播信道的访问，就是多路访问问题。<br />
			多路访问协议：节点通过协议来规范他们在共享的广播信道上的传输行为。<br />
			碰撞：对于广播链路，因为所有节点都能传输帧，所以多个节点可能会同时传输帧。当发生这种情况时，所有节点同时接受到多个帧；也就是说传输帧在所有接收方处碰撞。通常当发生碰撞时，没有一个节点能有效地获得任何传输的帧；碰撞的信号纠缠
			在一起。因此，涉及此次碰撞的所有帧都丢失了，碰撞时间间隔中的广播信道被浪费了。<br />
			<h3>信道划分协议</h3>
			<div>
				<h4>十分多路复用（TDM）</h4>
				<div>
					一个支持N个节点的信道，且信道的传输速率为Rbps，TDM将时间划分成时间帧并进一步划分每个时间帧为N个时隙。然后把每个时隙分配给N个节点中的一个。无论何时，某个节点在有分组要发送的时候，他在循环的TDM帧中指派给它的时隙内传输分组
					比特。通常选择的时隙长度应该使一个时隙内能够传输单个分组。<br />
					优点：消除了碰撞且非常公平，每个节点在每个帧时间内得到专用的传输速率R/Nbps。<br />
					缺点：节点被限制于R/Nbps的平均速率，即使当前它是唯一有分组要发送的节点。节点必须总是等待它的传输序列中的轮次。
				</div>
				<h4>频分多路复用（FDM）</h4>
				<div>
					FDM将Rbps信道划分为不同的频段，每个频段具有（R/Nbps）带宽，并把每个频率分配给N个节点中的一个，因此FDM在单个较大的Rbps信道中创建了N个较小的R/Nbps信道。<br />
					优点：避免了碰撞，公平地划分了带宽<br />
					缺点：限制一个节点只能使用R/Nbps的带宽，即使它是唯一一个需要发送数据的节点。
				</div>
				<h4>码分多路复用（CDMA）</h4>
				<div>
					CMDA对每个节点分配一种不同的编码。然后每个节点用它唯一的编码来对他发送的数据进行编码。如果精心选择这些编码，不同的节点能够同时传输，并且他们各自相应接收方仍能正常接收发送
					方编码的数据比特，而不在乎其他节点的干扰传输。
				</div>
			</div>
			<h3>随机接入协议</h3>
			<div>
				随机接入协议中，一个节点总是以信道的全部速率进行发送。当有碰撞时，涉及碰撞的每个节点反复重发它的帧，到该帧无碰撞地通过为止。但是当一个节点经历一次碰撞时，它不必立刻重发该帧。相反
				他在重发该帧之前等待一个随机时延。设计碰撞的每个节点独立地选择随机时延。因为该随机时延是独立地选择的，所以以下现象是可能的：这些节点之一所选择的时延充分小于其他碰撞节点的时延，并因此能够无碰撞地将它的帧在信道中发出。
				<h4>时隙ALOHA</h4>
				<div>
					    
				</div>
			</div>
			<h3>轮流协议</h3>
			<div>
				多路访问协议的两个理想特性：1、当只有一个节点活跃时，该活跃节点有Rpbs的吞吐量；2、当有M个活跃节点的吞吐量接近R/Mbps；<br />
				轮流协议就是为了达到这两个理想特性而设计的：<br />
				下面是两种轮询协议：<br />
				第一种轮流协议：轮流协议要求这些节点之一要被指定为主节点。主节点以循环方式轮询每个节点。特别是，主节点首先向节点1发送一个报文，告诉他能够传输的帧的最多数量（主节点能够通过观察在信道上
				是否缺乏信号，来决定一个节点何时完成了帧的传输）上诉过程以这样的方式继续进行，主节点以循环的方式轮询了每个节点。<br>
				缺点：1、该协议引入了轮询时延，即通知一个节点“它可以传输”所需要的时间；2、如果主节点有故障，整个信道都变得不可操作；<br />
				第二种轮询协议：令牌传输协议，这种协议没有主节点，一个称为令牌的小的特殊帧在节点之间以某种固定的次序进行交换。例如：节点1可能总是将令牌传输给节点2，节点2总是把令牌传输给节点3，而节点N总是把令牌传输给节点1.当一个
				节点收到令牌时，仅当它由一些帧要发送时，它才持有这个令牌；否则，它立即向下一个节点转发该令牌。当一个节点收到令牌时，如果它确实有帧要传输，它发送最大数目的帧数，然后把令牌转发给下一个节点。
				令牌传递时分散的，且很高效；<br />
				缺点：一个节点故障可能使整个信道崩溃，或一个节点偶然忘记释放令牌，则必须调用某些恢复步骤使令牌返回到循环中来。
			</div>
			
		</div>
		<h2>交换局域网</h2>
		<div>
			<h3>链路层寻址和ARP</h3>
			<div>
				<div>
					MAC地址：也称LAN地址、物理地址，对大多数局域网，MAC地址长度为6字节，共计2的48次方个可能的地址，通常用十六进制表示法，IEEE管理者MAC地址的分配。
					当适配器收到一个帧时，将检查该帧中的目的MAC地址是否与自己的MAC地址匹配，如果匹配，该适配器提取出分装的数据报，并将该数据报沿协议栈向上传递。如果不
					匹配，该适配器丢弃该帧，不向上传递该数据报。<br />
					有时发送适配器的确要让局域网上所有的其他适配器来收到并处理它打算发送的帧。发送适配器在该帧的目的地址字段中插入一个特殊的MAC广播地址。对于使用6字节的局域网，广播地址是48个
					连续的1组成的字符串（十六进制：FF-FF-FF-FF-FF-FF）
				</div>
				<div>
					ARP地址解析协议：网络层地址和链路层地址之间转换；ARP只为在同一个子网上的主机和路由器接口解析IP地址。<br>
					每一个主机都设有一个 ARP 高速缓存(ARP cache)，里面有所在的局域网上的各主机和路由器的 IP 地址到硬件地址的映射表。<br />
					当主机 A 欲向本局域网上的某个主机 B 发送 IP 数据报时，就先在其 ARP 高速缓存中查看有无主机 B 的 IP 地址。如有，就可查出其对应的硬件地址，再将此硬件地址写入 MAC 帧，然后通过局域网将该 MAC 帧发往此硬件地址。  <br />
					<img src="./res/6-1.png" /><br />
					为了减少网络上的通信量，主机 A 在发送其 ARP 请求分组时，就将自己的 IP 地址到硬件地址的映射写入 ARP 请求分组。<br />
					当主机 B 收到 A 的 ARP 请求分组时，就将主机 A 的这一地址映射写入主机 B 自己的 ARP 高速缓存中。这对主机 B 以后向 A 发送数据报时就更方便了。<br />
					ARP 是解决同一个局域网上的主机或路由器的 IP 地址和硬件地址的映射问题。<br />
					如果所要找的主机和源主机不在同一个局域网上，那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。剩下的工作就由下一个网络来做。<br />
					从IP地址到硬件地址的解析是自动进行的，主机的用户对这种地址解析过程是不知道的。<br />
					只要主机或路由器要和本网络上的另一个已知 IP 地址的主机或路由器进行通信，ARP 协议就会自动地将该 IP 地址解析为链路层所需要的硬件地址。  <br />
					<h4>使用 ARP 的四种典型情况 </h4>
					<div>
						发送方是主机，要把IP数据报发送到本网络上的另一个主机。这时用 ARP 找到目的主机的硬件地址。 <br />
						发送方是主机，要把 IP 数据报发送到另一个网络上的一个主机。这时用 ARP 找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成。 <br />
						发送方是路由器，要把 IP 数据报转发到本网络上的一个主机。这时用 ARP 找到目的主机的硬件地址。 <br />
						发送方是路由器，要把 IP 数据报转发到另一个网络上的一个主机。这时用 ARP 找到本网络上另一个路由器的硬件地址。剩下的工作由这个路由器来完成。 <br />
					</div>
				</div>
				<div>
					发送数据报到子网以外
				</div>
			</div>
			<h3>
				以太网
			</h3>
			<div>
				<div>
					以太网帧结构
				</div>
				<div>
					以太网技术
				</div>
			</div>
			<h3>链路层交换机</h3>
			<div>
				<h4>交换机转发和过滤</h4>
				<div>
					
				</div>
				<h4>自学习</h4>
				<div>
					
					
				</div>
				<h4>交换机和路由器比较</h4>
				
			</div>
			<h3>虚拟局域网</h3>
			<div>
				
			</div>
			
		</div>
		<h2>链路虚拟化：网络作为链路层</h2>
		<div>
			<h3>多协议标签交换</h3>
			<div>
				
			</div>
		</div>
		
		<h2>数据中心网络</h2>
		<div>
			<h3>负载均衡</h3>
			<div>
				
			</div>
			<h3>数据中心网络发展趋势</h3>
			<div>
				
			</div>
		</div>
		
		<h2>回顾：Web页面请求的历程</h2>
		<div>
			
		</div>
		
		
		
	</body>
</html>
