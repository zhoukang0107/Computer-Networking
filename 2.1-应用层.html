<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>2.1 应用层</title>
	</head>
	<body>
		<h3>2.1 应用层</h3>
		<div>
			<h4>
				应用层协议原理
			</h4>
			<div>
				研发网络应用程序的核心是写出能够运行在不同的端系统和通过网络彼此通讯的程序，你不需要写在网络核心设备（如交换器和路由器）上运行的软件。网络核心设备并不
				在应用层上起作用，特别是在网络层及以下层面起作用，这种基本设计将应哟软件限制在端系统。<br />
				从应用程序研发者的角度看，网络体系结构是固定的，并为应用程序提供了特定的服务集合。另一方面，应用程序体系结构由应用程序研发者设计，规定了如何在各端系统
				上组织该应用程序。目前主流两种系统结构：客户-服务器体系结构和对等体系结构。
				<h5>进程通讯</h5>
				<div>
					网络通讯实际上是两个不同端系统上的进程，通过跨越计算机网络交换报文儿相互通信。发送进程生成并向网络中发送报文；接受进程接受这些报文并可能通过回送报
					文进行响应.<br /><br />
					客户和服务器进程:<br />
					在一对进程之间的通信会话场景中，发起通信的进程标识为客户端，在会话开始时等待联系的进程是服务器。<br />
					进程与计算机网络之间的接口：<br />
					进程通过一个称为套接字的软件接口向网络发送报文和从网络接受报文。应用程序的开发者可以控制套接字在应用层端的一切，但对套接字的运输层端几乎没有什么控
					制权，仅限于：1、选择运输层协议；2、也许能设定几个运输层参数(如最大缓冲和最大报文的长度等)；<br />
					进程寻址：<br>
					在一台主机上运行的进程为了向另一台主机上运行的进程发送分组，发送方需要知道接受端进程的地址；IP地址，标识主机地址，端口号，标识主机上的通讯的进程；
				</div>
				<h5>可供应用程序使用的运输服务</h5>
				<div>
					套接字是应用程序进程和运输层协议之间的接口；一个运输层协议能够为调用它的应用程序提供什么样的服务？可靠数据传输，吞吐量，定时和安全性；
				</div>
				<h5>因特网提供的运输服务</h5>
				<div>
					TCP服务：<br />
					TCP服务包括面向连接服务和可靠数据传输服务。<br />
					面向连接服务：应用程序数据报文开始流动之前，TCP让客户和服务器交换运输层控制信息，这个握手过程提醒客户和服务器，让他们对大量分组的到来做准备，
					握手阶段之后，一个TCP连接就在两个进程的套接字之间建立了，这是一条全双工的。当应用程序结束报文发送时，必须拆除该连接。<br />
					可靠数据传输服务：<br />
					通讯进程能够依靠TCP，无差错、按适当顺序交付所有发送的数据。当应用程序的一端将字节流传输进套接字时，它能够依靠TCP将相同的字节流交付给接收方的
					套接字，而没有字节的丢失和冗余。<br /><br />
					UDP服务：<br />
					UDP是无连接的，进程通讯前没有握手过程。是一种不可靠传输服务，当进程将一个报文发送进UDP套接字时，UDP协议不保证该报文将到达接受进程。而且到达的
					报文可能是乱序的。
				</div>
				<h5>应用层协议</h5>
				<div>
					应用层协议定义了运行在不同端系统上的应用程序进程如何互相传递报文：<br />
					<li>交换的报文类型（如请求报文和响应报文）</li>
					<li>各种 报文类型的语法（如报文中各个字段及这些字段是如何描述的）</li>
					<li>字段的语法（这些字段中信息的含义）</li>
					<li>确定一个进程何时以及如何发送报文，对报文进行响应的规则</li>
				</div>
	
			</div>
			<h4>Web和Http</h4>
			<div>
				<h5>万维网的工作方式</h5>
				<div>
					万维网以客户-服务器方式工作。<br />
					浏览器就是在用户计算机上的万维网客户程序。万维网文档所驻留的计算机则运行服务器程序，因此这个计算机也称为万维网服务器。<br />
					客户程序向服务器程序发出请求，服务器程序向客户程序送回客户所要的万维网文档。<br />
					在一个客户程序主窗口上显示出的万维网文档称为页面(page)。<br />
				</div>
				<h5>万维网必须解决的问题 </h5>
				<div>
					怎样标志分布在整个因特网上的万维网文档？ <br />
					使用统一资源定位符 URL (Uniform Resource Locator)来标志万维网上的各种文档。<br />
					使每一个文档在整个因特网的范围内具有唯一的标识符 URL。 <br />
					<br />
					用何协议实现万维网上各种超链的链接？ <br />
					在万维网客户程序与万维网服务器程序之间进行交互所使用的协议，是超文本传送协议 HTTP (HyperText Transfer Protocol)。<br />
					HTTP 是一个应用层协议，它使用 TCP 连接进行可靠的传送。 <br />
					<br />
					怎样使各种万维网文档都能在因特网上的各种计算机上显示出来，同时使用户清楚地知道在什么地方存在着超链？ <br />
					超文本标记语言 HTML (HyperText Markup Language)使得万维网页面的设计者可以很方便地用一个超链从本页面的某处链接到因特网上的任何一个万维网
					页面，并且能够在自己的计算机屏幕上将这些页面显示出来。 <br />
					<br />
					怎样使用户能够很方便地找到所需的信息？ <br />
					为了在万维网上方便地查找信息，用户可使用各种的搜索工具（即搜索引擎）。 <br />
				</div>
				<h5>统一资源定位符 URL</h5>
				<div>
					由以冒号隔开的两大部分组成，并且在 URL 中的字符对大写或小写没有要求。<br />
					URL 的一般形式是：<协议>://<主机>:<端口>/<路径> <br />
					协议：ftp——文件传送协议/http——超文本传送协议<br />
					主机：是存放资源的主机在因特网中的域名<br />
					端口/路径：有时可省略<br />
					<br />
					使用 HTTP 的 URL 的一般形式
					http://<主机>:<端口>/<路径> <br />
					HTTP 的默认端口号是 80，通常可省略<br />
					若再省略文件的<路径>项，则 URL 就指到因特网上的某个主页(home page)<br />
				</div>
				<h5>用户点击鼠标后所发生的事件 </h5>
				<div>
					<li>浏览器分析超链指向页面的 URL</li>
					<li>浏览器向 DNS 请求解析 www.baidu.com 的 IP 地址</li>
					<li>域名系统 DNS 解析出百度服务器的 IP 地址</li>
					<li>浏览器与服务器建立 TCP 连接</li>
					<li>浏览器发出取文件命令：GET /xxx/xxx/index.htm</li>
					<li>服务器给出响应，把文件 index.htm 发给浏览器</li>
					<li>TCP 连接释放</li>
				</div>
				<h5>HTTP 的主要特点 </h5>
				<div>
					HTTP 是面向事务的客户服务器协议。<br />
					HTTP 1.0 协议是无状态的(stateless)。<br />
					HTTP 协议本身也是无连接的，虽然它使用了面向连接的 TCP 向上提供的服务<br />
				</div>
				<h5>请求一个万维网文档所需的时间 </h5>
				<div>
					<img src="./res/2-1.png" />
				</div>
				<h5>持续连接</h5>
				<div>
					HTTP/1.1 协议使用持续连接。<br />
					万维网服务器在发送响应后仍然在一段时间内保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的 HTTP 请求报文和响应报文。<br />
					这并不局限于传送同一个页面上链接的文档，而是只要这些文档都在同一个服务器上就行。<br />
				</div>
				<h5>持续连接的两种工作方式</h5>
				<div>
					非流水线方式：客户在收到前一个响应后才能发出下一个请求。这比非持续连接的两倍 RTT 的开销节省了建立 TCP 连接所需的一个 RTT 时间。但服务器在发送完一个对
					象后，其 TCP 连接就处于空闲状态，浪费了服务器资源。<br />
					流水线方式：客户在收到 HTTP 的响应报文之前就能够接着发送新的请求报文。一个接一个的请求报文到达服务器后，服务器就可连续发回响应报文。使用流水线方式时，
					客户访问所有的对象只需花费一个 RTT时间，使 TCP 连接中的空闲时间减少，提高了下载文档效率。<br />
				</div>
				<h5>HTTP 的报文结构 </h5>
				<div>
					HTTP 有两类报文：<br />
					请求报文——从客户向服务器发送请求报文。<br /><br />
					响应报文——从服务器到客户的回答。<br />
					由于 HTTP 是面向正文的(text-oriented)，因此在报文中的每一个字段都是一些 ASCII 码串，因而每个字段的长度都是不确定的。<br />
					<h6>请求报文</h6>
					<div>
						报文由三个部分组成，即开始行、首部行和实体主体。在请求报文中，开始行就是请求行。<br />
						<img src="./res/2-2.png" /><br />
						
					</div>
					<h6>响应报文</h6>
					<div>
						响应报文的开始行是状态行。状态行包括三项内容，即 HTTP 的版本，状态码，以及解释状态码的简单短语。 
						<img src="./res/2-3.png" /><br />
					</div>
					<h6>
						HTTP 请求报文的方法
					</h6>
					<div>
						<li>OPTION:请求一些选项的信息</li>
						<li>GET:请求读取由 URL所标志的信息</li>
						<li>HEAD:请求读取由 URL所标志的信息的首部</li>
						<li>POST:给服务器添加信息（例如，注释）</li>
						<li>PUT:在指明的 URL下存储一个文档</li>
						<li>DELETE:删除指明的 URL所标志的资源</li>
						<li>TRACE:用来进行环回测试的请求报文</li>
						<li>CONNECT:用于代理服务器</li>
					</div>
					<h6>状态码</h6>
					<div>
						1xx 表示通知信息的，如请求收到了或正在进行处理。<br />
						2xx 表示成功，如接受或知道了。<br />
						3xx 表示重定向，表示要完成请求还必须采取进一步的行动。<br />
						4xx 表示客户的差错，如请求中有错误的语法或不能完成。<br /><br />
						5xx 表示服务器的差错，如服务器失效无法完成请求。<br />
					</div>
				</div>
				<h5>用户与服务器的交互：cookie</h5>
				<div>
					万维网站点使用 Cookie 来跟踪用户。<br />
					Cookie 表示在 HTTP 服务器和客户之间传递的状态信息。<br />
					使用 Cookie 的网站服务器为用户产生一个唯一的识别码。利用此识别码，网站就能够跟踪该用户在该网站的活动。  <br />
				</div>
				<h5>Web缓存（代理服务器）</h5>
				<div>
					代理服务器(proxy server)又称为万维网高速缓存(Web cache)，它代表浏览器发出 HTTP 请求。<br />
					万维网高速缓存把最近的一些请求和响应暂存在本地磁盘中。<br />
					当与暂时存放的请求相同的新请求到达时，万维网高速缓存就把暂存的响应发送出去，而不需要按 URL 的地址再去因特网访问该资源。 <br /> 
				</div>
				<h5>服务代理流程</h5>
				<div>
					<li>浏览器访问因特网的服务器时，要先与企业网的高速缓存建立 TCP 连接，并向高速缓存发出 HTTP 请求报文 </li>
					<li>若高速缓存已经存放了所请求的对象，则将此对象放入 HTTP 响应报文中返回给浏览器</li>
					<li>否则，高速缓存就代表发出请求的用户浏览器，与因特网上的源点服务器建立 TCP 连接，并发送 HTTP 请求报文</li>
					<li>源点服务器将所请求的对象放在 HTTP 响应报文中返回给企业网的高速缓存</li>
					<li>高速缓存收到此对象后，先复制在其本地存储器中（为今后使用），然后再将该对象放在 HTTP 响应报文中，通过已建立的 TCP 连接，返回给请求该对象的浏览器。</li>
				</div>
				<h5>缓存失效机制：条件Get方法</h5>
				<div>
					
				</div>
				
				
		

			</div>
		</div>
	</body>
</html>
